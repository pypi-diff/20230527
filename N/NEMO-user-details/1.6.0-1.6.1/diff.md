# Comparing `tmp/NEMO_user_details-1.6.0-py3-none-any.whl.zip` & `tmp/NEMO_user_details-1.6.1-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,28 +1,28 @@
-Zip file size: 18783 bytes, number of entries: 26
--rw-r--r--  2.0 unx        0 b- defN 23-May-26 16:16 NEMO_user_details/__init__.py
--rw-r--r--  2.0 unx      627 b- defN 23-May-26 16:16 NEMO_user_details/admin.py
--rw-r--r--  2.0 unx     2914 b- defN 23-May-26 16:16 NEMO_user_details/api.py
--rw-r--r--  2.0 unx      200 b- defN 23-May-26 16:16 NEMO_user_details/apps.py
--rw-r--r--  2.0 unx     1948 b- defN 23-May-26 16:16 NEMO_user_details/customizations.py
--rw-r--r--  2.0 unx     1545 b- defN 23-May-26 16:16 NEMO_user_details/forms.py
--rw-r--r--  2.0 unx     1880 b- defN 23-May-26 16:16 NEMO_user_details/models.py
--rw-r--r--  2.0 unx      757 b- defN 23-May-26 16:16 NEMO_user_details/urls.py
--rw-r--r--  2.0 unx     2846 b- defN 23-May-26 16:16 NEMO_user_details/migrations/0001_initial.py
--rw-r--r--  2.0 unx      763 b- defN 23-May-26 16:16 NEMO_user_details/migrations/0002_version_1_1_0.py
--rw-r--r--  2.0 unx      469 b- defN 23-May-26 16:16 NEMO_user_details/migrations/0003_version_1_3_0.py
--rw-r--r--  2.0 unx      458 b- defN 23-May-26 16:16 NEMO_user_details/migrations/0004_userdetails_employee_id.py
--rw-r--r--  2.0 unx        0 b- defN 23-May-26 16:16 NEMO_user_details/migrations/__init__.py
--rw-rw-rw-  2.0 unx     5781 b- defN 23-May-26 16:16 NEMO_user_details/templates/NEMO_user_details/email_broadcast.html
--rw-rw-rw-  2.0 unx     6909 b- defN 23-May-26 16:16 NEMO_user_details/templates/NEMO_user_details/user_details.html
--rw-rw-rw-  2.0 unx     7270 b- defN 23-May-26 16:16 NEMO_user_details/templates/customizations/customizations_user_details.html
--rw-r--r--  2.0 unx        0 b- defN 23-May-26 16:16 NEMO_user_details/templatetags/__init__.py
--rw-r--r--  2.0 unx      180 b- defN 23-May-26 16:16 NEMO_user_details/templatetags/user_details_tags.py
--rw-r--r--  2.0 unx        0 b- defN 23-May-26 16:16 NEMO_user_details/views/__init__.py
--rw-r--r--  2.0 unx     1516 b- defN 23-May-26 16:16 NEMO_user_details/views/email.py
--rw-r--r--  2.0 unx     7883 b- defN 23-May-26 16:16 NEMO_user_details/views/users.py
--rw-rw-rw-  2.0 unx     1074 b- defN 23-May-26 16:16 NEMO_user_details-1.6.0.dist-info/LICENSE
--rw-r--r--  2.0 unx     1738 b- defN 23-May-26 16:16 NEMO_user_details-1.6.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-May-26 16:16 NEMO_user_details-1.6.0.dist-info/WHEEL
--rw-r--r--  2.0 unx       18 b- defN 23-May-26 16:16 NEMO_user_details-1.6.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2471 b- defN 23-May-26 16:16 NEMO_user_details-1.6.0.dist-info/RECORD
-26 files, 49339 bytes uncompressed, 14653 bytes compressed:  70.3%
+Zip file size: 19133 bytes, number of entries: 26
+-rw-r--r--  2.0 unx        0 b- defN 23-May-27 14:44 NEMO_user_details/__init__.py
+-rw-r--r--  2.0 unx      627 b- defN 23-May-27 14:44 NEMO_user_details/admin.py
+-rw-r--r--  2.0 unx     3607 b- defN 23-May-27 14:44 NEMO_user_details/api.py
+-rw-r--r--  2.0 unx      200 b- defN 23-May-27 14:44 NEMO_user_details/apps.py
+-rw-r--r--  2.0 unx     1948 b- defN 23-May-27 14:44 NEMO_user_details/customizations.py
+-rw-r--r--  2.0 unx     1545 b- defN 23-May-27 14:44 NEMO_user_details/forms.py
+-rw-r--r--  2.0 unx     2234 b- defN 23-May-27 14:44 NEMO_user_details/models.py
+-rw-r--r--  2.0 unx      757 b- defN 23-May-27 14:44 NEMO_user_details/urls.py
+-rw-r--r--  2.0 unx     2846 b- defN 23-May-27 14:44 NEMO_user_details/migrations/0001_initial.py
+-rw-r--r--  2.0 unx      763 b- defN 23-May-27 14:44 NEMO_user_details/migrations/0002_version_1_1_0.py
+-rw-r--r--  2.0 unx      469 b- defN 23-May-27 14:44 NEMO_user_details/migrations/0003_version_1_3_0.py
+-rw-r--r--  2.0 unx      458 b- defN 23-May-27 14:44 NEMO_user_details/migrations/0004_userdetails_employee_id.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-27 14:44 NEMO_user_details/migrations/__init__.py
+-rw-rw-rw-  2.0 unx     5781 b- defN 23-May-27 14:44 NEMO_user_details/templates/NEMO_user_details/email_broadcast.html
+-rw-rw-rw-  2.0 unx     6909 b- defN 23-May-27 14:44 NEMO_user_details/templates/NEMO_user_details/user_details.html
+-rw-rw-rw-  2.0 unx     7270 b- defN 23-May-27 14:44 NEMO_user_details/templates/customizations/customizations_user_details.html
+-rw-r--r--  2.0 unx        0 b- defN 23-May-27 14:44 NEMO_user_details/templatetags/__init__.py
+-rw-r--r--  2.0 unx      180 b- defN 23-May-27 14:44 NEMO_user_details/templatetags/user_details_tags.py
+-rw-r--r--  2.0 unx        0 b- defN 23-May-27 14:44 NEMO_user_details/views/__init__.py
+-rw-r--r--  2.0 unx     1516 b- defN 23-May-27 14:44 NEMO_user_details/views/email.py
+-rw-r--r--  2.0 unx     7883 b- defN 23-May-27 14:44 NEMO_user_details/views/users.py
+-rw-rw-rw-  2.0 unx     1074 b- defN 23-May-27 14:45 NEMO_user_details-1.6.1.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1738 b- defN 23-May-27 14:45 NEMO_user_details-1.6.1.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-May-27 14:45 NEMO_user_details-1.6.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx       18 b- defN 23-May-27 14:45 NEMO_user_details-1.6.1.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2471 b- defN 23-May-27 14:45 NEMO_user_details-1.6.1.dist-info/RECORD
+26 files, 50386 bytes uncompressed, 15003 bytes compressed:  70.2%
```

## zipnote {}

```diff
@@ -57,23 +57,23 @@
 
 Filename: NEMO_user_details/views/email.py
 Comment: 
 
 Filename: NEMO_user_details/views/users.py
 Comment: 
 
-Filename: NEMO_user_details-1.6.0.dist-info/LICENSE
+Filename: NEMO_user_details-1.6.1.dist-info/LICENSE
 Comment: 
 
-Filename: NEMO_user_details-1.6.0.dist-info/METADATA
+Filename: NEMO_user_details-1.6.1.dist-info/METADATA
 Comment: 
 
-Filename: NEMO_user_details-1.6.0.dist-info/WHEEL
+Filename: NEMO_user_details-1.6.1.dist-info/WHEEL
 Comment: 
 
-Filename: NEMO_user_details-1.6.0.dist-info/top_level.txt
+Filename: NEMO_user_details-1.6.1.dist-info/top_level.txt
 Comment: 
 
-Filename: NEMO_user_details-1.6.0.dist-info/RECORD
+Filename: NEMO_user_details-1.6.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## NEMO_user_details/api.py

```diff
@@ -29,14 +29,32 @@
         model = UserDetails
         exclude = ("user",)
 
 
 class UserWithDetailsSerializer(UserSerializer):
     details = UserDetailsSerializer(required=False)
 
+    # Remove after NEMO 4.6.0 is released
+    class Meta:
+        model = User
+        exclude = ["preferences"]
+
+    # Remove after NEMO 4.6.0 is released
+    def full_clean(self, instance, exclude=None, validate_unique=True):
+        exclude = getattr(self.Meta, 'exclude', None)
+        super().full_clean(instance, exclude, validate_unique)
+
+    # Remove after NEMO 4.6.0 is released
+    def to_internal_value(self, data):
+        # Unique and nullable field conflict if passed the empty string so set it to None instead
+        if data.get("badge_number", None) == "":
+            data = data.copy()
+            data["badge_number"] = None
+        return super().to_internal_value(data)
+
     def get_fields(self):
         fields = super().get_fields()
         detail_fields = fields.pop("details")
         if detail_fields:
             for key, value in detail_fields.fields.items():
                 if key != "id":
                     # reset the source to details
```

## NEMO_user_details/models.py

```diff
@@ -1,8 +1,9 @@
 from NEMO.models import BaseModel, User
+from django.core.exceptions import ValidationError
 from django.db import models
 
 
 class Ethnicity(BaseModel):
     name = models.CharField(max_length=200, unique=True, help_text="The name of the ethnicity")
 
     def __str__(self):
@@ -40,15 +41,21 @@
     ethnicity = models.ForeignKey(
         Ethnicity, null=True, blank=True, help_text="The user's ethnicity", on_delete=models.SET_NULL
     )
     emergency_contact = models.CharField(
         max_length=250, blank=True, help_text="The user's emergency contact information"
     )
     phone_number = models.CharField(max_length=40, blank=True, help_text="The user's phone number")
-    employee_id = models.CharField(max_length=255, blank=True, help_text="The user's internal employee id")
+    employee_id = models.CharField(max_length=255, null=True, blank=True, help_text="The user's internal employee id")
+
+    def clean(self):
+        if self.employee_id:
+            not_unique = UserDetails.objects.filter(employee_id=self.employee_id).exclude(id=self.id)
+            if not_unique.exists():
+                raise ValidationError({"employee_id": "A user with this Employee id already exists."})
 
     def __str__(self):
         return f"{self.user.get_name()}'s details"
 
 
 def get_user_details(user: User):
     try:
```

## Comparing `NEMO_user_details-1.6.0.dist-info/LICENSE` & `NEMO_user_details-1.6.1.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `NEMO_user_details-1.6.0.dist-info/METADATA` & `NEMO_user_details-1.6.1.dist-info/METADATA`

 * *Files 9% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: NEMO-user-details
-Version: 1.6.0
+Version: 1.6.1
 Summary: Install user details plugin for NEMO
 Home-page: https://gitlab.com/nemo-community/atlantis-labs/nemo-user-details
 Author: Atlantis Labs LLC
 Author-email: atlantis@atlantislabs.io
 License: MIT
 Keywords: NEMO
 Classifier: Development Status :: 5 - Production/Stable
```

## Comparing `NEMO_user_details-1.6.0.dist-info/RECORD` & `NEMO_user_details-1.6.1.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,26 +1,26 @@
 NEMO_user_details/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 NEMO_user_details/admin.py,sha256=bvoWfgIKQtSf_ZOMsO21PCdsHYrtC_l-MpgUwGzOyVM,627
-NEMO_user_details/api.py,sha256=Brh8oCbPP8Nwxgbw7rHocXQDT3z3ZHqU3OauhyjLWkA,2914
+NEMO_user_details/api.py,sha256=0bmrfb4dJqKjSMVu-VVJ0r84mqh076PzgA3tA7dVvT0,3607
 NEMO_user_details/apps.py,sha256=qYlibryDv9rWDGFK5OROQi5QSQxjkW5MTQzK86nmmD0,200
 NEMO_user_details/customizations.py,sha256=Mkcn7r30mMQyGlpBZQIln7QvsR6MTcUSmb_zh8DT_DQ,1948
 NEMO_user_details/forms.py,sha256=kfQBP19MYsgu9ZT_2yA3Ru-HhLLjTNB2EQPyhdNk7rQ,1545
-NEMO_user_details/models.py,sha256=zfjLiK1ZYMZUtSj0F1fq4FqWwh3u7qG0Wh4T20NkCxw,1880
+NEMO_user_details/models.py,sha256=rGN1rUupAj-K0FqyzIQHtzxlKbC2xy23N3I0bFUo5vk,2234
 NEMO_user_details/urls.py,sha256=m28h2zIh04aW5_v7uGdrrMxutSqaB4e5KokfW2KiYSs,757
 NEMO_user_details/migrations/0001_initial.py,sha256=LMkH4jljkb09s78Q804hbmRU6JemuLCR4AREdTUWWkk,2846
 NEMO_user_details/migrations/0002_version_1_1_0.py,sha256=xDLsqEACOR06FLohheDb90zXKFeT2JgM7r7ZmcN3nqY,763
 NEMO_user_details/migrations/0003_version_1_3_0.py,sha256=P4eQGzkYR3rMRUlHYQExDW37_O1MckkKD4grX0M2kaQ,469
 NEMO_user_details/migrations/0004_userdetails_employee_id.py,sha256=eFAv0oW9G_-sEI_Dlk3CTstC_DJuuGzoJmjVhpj7ANU,458
 NEMO_user_details/migrations/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 NEMO_user_details/templates/NEMO_user_details/email_broadcast.html,sha256=2rHKHD3VxXD3unxAWUo-FDSkfSUCyI9HTiFgSQG8dAE,5781
 NEMO_user_details/templates/NEMO_user_details/user_details.html,sha256=IxLvn1GqnYeyA3XjxH553tjNmnp_6yqLP8d8JpUTxh0,6909
 NEMO_user_details/templates/customizations/customizations_user_details.html,sha256=8-h3yNgqtdkpqd6HC3jtaavgjr-4uz3_XX_DEHYSY5Q,7270
 NEMO_user_details/templatetags/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 NEMO_user_details/templatetags/user_details_tags.py,sha256=lqVT65g1As7Pg1AKFhsvveDauloc_OXQ3cqMgjGqLuA,180
 NEMO_user_details/views/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 NEMO_user_details/views/email.py,sha256=0Qcm4Zuseu-I1s818qCkTexrC6DMUzRytrAeOMv-Low,1516
 NEMO_user_details/views/users.py,sha256=Qbn8c_5nPVyI1IFLubIlZFwSGzOCNoOUjmIFBjSVEXE,7883
-NEMO_user_details-1.6.0.dist-info/LICENSE,sha256=wFCCmLGvBMU6-W_0h08WYEs3cFtVstutDmY5AzKppQc,1074
-NEMO_user_details-1.6.0.dist-info/METADATA,sha256=7HHrEI_BjKiibMuOHsgiJrDk4K8rhlvTzsssb_gCB78,1738
-NEMO_user_details-1.6.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-NEMO_user_details-1.6.0.dist-info/top_level.txt,sha256=uBmmIIHkO6qtNL-RNHyTDDPjzggBh0KaYkmaV34Ruyc,18
-NEMO_user_details-1.6.0.dist-info/RECORD,,
+NEMO_user_details-1.6.1.dist-info/LICENSE,sha256=wFCCmLGvBMU6-W_0h08WYEs3cFtVstutDmY5AzKppQc,1074
+NEMO_user_details-1.6.1.dist-info/METADATA,sha256=ay4wxMqIl03-wHiMl7GQ6TFZ2zrVxytAuFtSaJRDqsQ,1738
+NEMO_user_details-1.6.1.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+NEMO_user_details-1.6.1.dist-info/top_level.txt,sha256=uBmmIIHkO6qtNL-RNHyTDDPjzggBh0KaYkmaV34Ruyc,18
+NEMO_user_details-1.6.1.dist-info/RECORD,,
```

